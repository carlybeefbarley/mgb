
const ToolPaste = {
  name: "Paste",
  description: "Paste copied region",
  icon: "paste icon",        // Semantic-UI icon CSS class
  editCursor: "copy",
  supportsDrag: true,
  shortcutKey: 'v',
  changesImage: true,             // This does cause changes to the image, so image is dirty if this tool used


  handleMouseDown: ( drawEnv ) => {
    // drawEnv is in the format generated by EditGraphic.collateDrawingToolEnv()

    ToolPaste._storedPreviewImageData = drawEnv.previewCtx.getImageData(0,0, drawEnv.width, drawEnv.height)
    ToolPaste._startx = drawEnv.x
    ToolPaste._starty = drawEnv.y
  },

  handleMouseMove: ( drawEnv ) => {
    let pasteRect = drawEnv.getPasteRect();
    console.log(pasteRect);
    if(!pasteRect) return;

    drawEnv.updateEditCanvasFromSelectedPreviewCanvas()
    drawEnv.editCtx.save();
    drawEnv.editCtx.globalAlpha = 0.4;
    drawEnv.editCtx.putImageData(pasteRect.imgData, drawEnv.x*drawEnv.scale, drawEnv.y*drawEnv.scale);
    drawEnv.editCtx.restore();
    console.log("paste preview");
  },

  handleMouseUp: ( drawEnv ) => {

    ToolPaste._storedPreviewImageData = null
    ToolPaste._startx = null
    ToolPaste._starty = null

  },

  handleMouseLeave: ( drawEnv ) => {
    ToolPaste.handleMouseUp()
  }

};

export default ToolPaste
